# =============================
# FoliaShop - 扭蛋配置
# =============================
# 此文件包含扭蛋系统的所有配置
# 可以覆盖 config.yml 中的扭蛋设置

# 是否启用扭蛋
enabled: true

# 方块绑定展示实体设置
display-entity:
  # 是否启用展示实体
  enabled: true
  # 缩放比例 (默认 0.8)
  scale: 0.8
  # 初始Y轴旋转角度（度，默认 45）
  rotation-y: 45
  # 是否朝向玩家 (true=朝向玩家, false=固定方向)
  face-player: false
  # 是否启用悬浮动画
  floating-animation: true
  # 悬浮动画幅度（格，默认 0.1）
  float-amplitude: 0.1
  # 悬浮动画速度（默认 1.0）
  float-speed: 1.0
  # 展示实体高度偏移（格，默认 1.5）
  height-offset: 1.5
  # 动画更新周期（tick，默认 3）
  animation-period: 3
  # 视图范围（格，默认 32）
  view-range: 32
  # 阴影半径（默认 0.3）
  shadow-radius: 0.3
  # 阴影强度（默认 0.3）
  shadow-strength: 0.3
  # 是否发光（默认 false）
  glowing: false
  # 发光颜色（可选，格式: "RRGGBB" 或 "#RRGGBB"，不设置则使用默认白色）
  # 示例: "FF0000" = 红色, "00FF00" = 绿色, "0000FF" = 蓝色
  glow-color: null
  # 粒子效果配置
  particle-effect:
    # 效果类型: NONE, STAR_RING, MAGIC_RUNE, RAINBOW_HALO, FLAME_AURA, FROST_CRYSTAL, LOVE_BUBBLE
    type: NONE
    # 粒子密度 (每周期生成的粒子数，默认 3)
    density: 3
    # 效果半径 (格，默认 1.2)
    radius: 1.2
    # 效果速度 (默认 1.0)
    speed: 1.0
    # 自定义颜色 (可选，格式: "RRGGBB" 或 "#RRGGBB")
    # 不设置则使用预设颜色
    color: null

# 扭蛋机列表
# 配置说明:
# - icon: 扭蛋机图标物品ID
# - icon-components: 图标附加NBT组件（可选），格式: "path+value"
# - pity: 软保底配置（可选）
#     enabled: 是否启用
#     start: 软保底开始计数（如70，表示70抽后开始增加保底概率）
#     max: 硬保底计数（如90，表示90抽必出保底目标）
#     target-max-probability: 保底目标奖品的概率阈值（如0.05表示概率<=5%的奖品为保底目标）
#
# NBT组件示例:
#   icon-components:
#     # 添加附魔光泽（无实际附魔效果）
#     - "minecraft:enchantment_glint_override+true"
#     # 设置自定义名称
#     - "minecraft:custom_name+\"§6高级扭蛋机\""
#     # 设置自定义模型数据
#     - "minecraft:custom_model_data+1001"
#
machines:
  # ========== 普通扭蛋机 ==========
  normal:
    name: "<green>普通扭蛋机"
    description:
      - "<gray>花费 <yellow>100金币 <gray>抽取一次"
      - "<gray>有机会获得稀有物品！"
      - ""
      - "<green>✦ 单抽: 100金币"
      - "<green>✦ 10连抽: 1000金币"
    icon: "minecraft:chest"
    # 每次抽奖价格
    cost: 100.0
    # 单抽动画时长（秒）
    animation-duration: 3
    # 10连抽动画时长（秒），不配置则默认为单抽的3倍
    animation-duration-ten: 8
    # 是否广播稀有奖品
    broadcast-rare: true
    # 稀有度阈值（低于此概率的奖品会广播）
    broadcast-threshold: 0.05

    # 软保底配置（可选，不配置则不启用保底）
    # pity:
    #   enabled: true
    #   start: 70
    #   max: 90
    #   target-max-probability: 0.05

    # 展示实体覆盖配置（可选）
    # 未设置的项将继承全局 display-entity 配置
    # display-entity:
    #   enabled: true       # 是否启用展示实体（默认 true）
    #   scale: 1.0
    #   rotation-y: 90.0
    #   face-player: true
    #   floating-animation: true
    #   float-amplitude: 0.2
    #   float-speed: 2.0
    #   height-offset: 2.0
    #   glowing: true
    #   glow-color: "#FFD700"  # 金色发光
    #   particle-effect:
    #     type: STAR_RING  # 环绕星光
    #     density: 3
    #     radius: 1.5
    #     speed: 1.5

    # 奖品列表
    # 奖品NBT组件配置（可选），格式: "path+value"
    #
    # NBT组件示例:
    #   components:
    #     # 添加附魔
    #     - "minecraft:enchantments+{'minecraft:sharpness':5}"
    #     # 设置自定义名称
    #     - "minecraft:custom_name+\"§6传说之剑\""
    #     # 设置Lore
    #     - "minecraft:lore+[\"§7稀有奖品\",\"§7值得收藏\"]"
    #     # 设置自定义数据
    #     - "minecraft:custom_data+{gacha_reward:true,rarity:'epic'}"
    #
    rewards:
      # 普通奖品
      - id: "common_cobblestone"
        item: "minecraft:cobblestone"
        amount: 64
        probability: 0.15
        display-name: "<white>一堆圆石"
      - id: "common_oak_log"
        item: "minecraft:oak_log"
        amount: 32
        probability: 0.12
        display-name: "<white>橡木原木"
      - id: "common_coal"
        item: "minecraft:coal"
        amount: 16
        probability: 0.10
        display-name: "<white>煤炭"
      # 不常见奖品
      - id: "uncommon_iron"
        item: "minecraft:iron_ingot"
        amount: 8
        probability: 0.08
        display-name: "<green>铁锭礼包"
      - id: "uncommon_gold"
        item: "minecraft:gold_ingot"
        amount: 4
        probability: 0.06
        display-name: "<green>金锭礼包"
      # 稀有奖品
      - id: "rare_diamond"
        item: "minecraft:diamond"
        amount: 2
        probability: 0.03
        display-name: "<blue>钻石礼包"
        broadcast: true
      # 史诗奖品
      - id: "epic_netherite"
        item: "minecraft:netherite_ingot"
        amount: 1
        probability: 0.01
        display-name: "<light_purple>下界合金锭"
        broadcast: true

  # ========== 高级扭蛋机（示例） ==========
  premium:
    name: "<gold>高级扭蛋机"
    description:
      - "<gray>花费 <yellow>500金币 <gray>抽取一次"
      - "<gold>更高概率获得稀有物品！"
      - ""
      - "<gold>✦ 单抽: 500金币"
      - "<gold>✦ 10连抽: 5000金币"
    icon: "minecraft:ender_chest"
    cost: 500.0
    animation-duration: 5
    broadcast-rare: true
    broadcast-threshold: 0.10

    # 扭蛋机图标带NBT示例：发光效果
    icon: "minecraft:diamond_sword"
    icon-components:
      # 添加附魔光泽（让图标看起来发光）
      - "minecraft:enchantment_glint_override+true"
      # 设置自定义名称
      - "minecraft:custom_name+\"§6§l高级扭蛋机\""
      # 设置Lore
      - "minecraft:lore+[\"§7消耗500金币抽奖\",\"§7更高概率获得稀有物品\"]"

    # 这个扭蛋机有更大的展示实体
    display-entity:
      scale: 1.2
      rotation-y: 0.0
      face-player: true
      height-offset: 2.0

    # 软保底配置
    pity:
      # 是否启用软保底
      enabled: true
      # 软保底开始计数（达到此计数后，保底目标概率开始增长）
      start: 70
      # 硬保底计数（达到此计数必出保底目标）
      max: 90
      # 保底目标奖品的最大概率阈值（概率<=此值的奖品为保底目标）
      target-max-probability: 0.05

    rewards:
      - id: "p_iron"
        item: "minecraft:iron_ingot"
        amount: 16
        probability: 0.20
        display-name: "<white>铁锭礼包"
      - id: "p_gold"
        item: "minecraft:gold_ingot"
        amount: 8
        probability: 0.15
        display-name: "<white>金锭礼包"
      - id: "p_diamond"
        item: "minecraft:diamond"
        amount: 4
        probability: 0.08
        display-name: "<green>钻石礼包"
      - id: "p_emerald"
        item: "minecraft:emerald"
        amount: 8
        probability: 0.05
        display-name: "<green>绿宝石礼包"
      - id: "p_netherite"
        item: "minecraft:netherite_ingot"
        amount: 1
        probability: 0.02
        display-name: "<blue>下界合金锭"
        broadcast: true

      # 带NBT的示例奖品：附魔钻石剑
      - id: "p_legendary_sword"
        item: "minecraft:diamond_sword"
        amount: 1
        probability: 0.01
        display-name: "<gold>§l传说之剑"
        broadcast: true
        components:
          # 添加多重附魔
          - "minecraft:enchantments+{'minecraft:sharpness':5,'minecraft:unbreaking':3,'minecraft:mending':1,'minecraft:fire_aspect':2,'minecraft:looting':3}"
          # 设置自定义名称（带颜色）
          - "minecraft:custom_name+\"§6§l传说之剑§r\""
          # 设置Lore
          - "minecraft:lore+[\"§7高级扭蛋机限定\",\"§7蕴含着强大的魔力\",\"§c§l传说品质\"]"
          # 设置不可破坏
          - "minecraft:unbreakable+{}"
          # 设置自定义数据
          - "minecraft:custom_data+{gacha_reward:true,rarity:'legendary',machine:'premium',version:1b}"
